---
apply: on-demand
trigger: "ç•¶ä½¿ç”¨è€…èªªã€Œé–‹å§‹é–‹ç™¼ã€ã€ã€Œé€²å…¥é–‹ç™¼æ¨¡å¼ã€æˆ–å·²å®Œæˆ feature-start æº–å‚™é€²å…¥å¯¦ä½œéšæ®µæ™‚"
---

# Develop Mode - é–‹ç™¼æ¨¡å¼

## ç›®çš„
éµå¾ª TDDï¼ˆTest-Driven Developmentï¼‰æµç¨‹ï¼Œç¢ºä¿æ¯å€‹åŠŸèƒ½éƒ½æœ‰å®Œæ•´çš„æ¸¬è©¦è¦†è“‹ï¼Œä¸¦ç¬¦åˆå°ˆæ¡ˆçš„ç¨‹å¼ç¢¼å“è³ªæ¨™æº–ã€‚

---

## å‰ç½®æ¢ä»¶

1. âœ… å·²å®Œæˆ Feature Start æµç¨‹
2. âœ… åŠŸèƒ½åˆ†æ”¯å·²å»ºç«‹
3. âœ… TODO æ¸…å–®å·²å»ºç«‹ï¼ˆ`docs/todos/<feature-name>.md`ï¼‰
4. âœ… Gherkin feature æª”æ¡ˆå·²å»ºç«‹ï¼ˆå¦‚é©ç”¨ï¼‰

---

## é–‹ç™¼æµç¨‹ï¼ˆTDD Cycleï¼‰

### Red-Green-Refactor å¾ªç’°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RED: æ’°å¯«å¤±æ•—çš„æ¸¬è©¦                      â”‚
â”‚  â†“                                       â”‚
â”‚  GREEN: æ’°å¯«æœ€å°‘çš„ç¨‹å¼ç¢¼è®“æ¸¬è©¦é€šé         â”‚
â”‚  â†“                                       â”‚
â”‚  REFACTOR: é‡æ§‹ç¨‹å¼ç¢¼ï¼Œä¿æŒæ¸¬è©¦é€šé        â”‚
â”‚  â†“                                       â”‚
â”‚  å›åˆ° REDï¼ˆä¸‹ä¸€å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼‰                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## åŸ·è¡Œæ­¥é©Ÿ

### Step 1: Red - æ’°å¯«æ¸¬è©¦ï¼ˆTest Firstï¼‰

**åŸ·è¡Œå‹•ä½œï¼š**
1. å¾ TODO æ¸…å–®ä¸­é¸æ“‡ä¸€å€‹å¾…é–‹ç™¼çš„åŠŸèƒ½é»
2. æ’°å¯«æ¸¬è©¦æ¡ˆä¾‹ï¼ˆå…ˆå¯«æ¸¬è©¦ï¼Œä¸å¯«å¯¦ä½œï¼‰
3. åŸ·è¡Œæ¸¬è©¦ï¼Œç¢ºèªæ¸¬è©¦**å¤±æ•—**ï¼ˆRedï¼‰

**æ¸¬è©¦é¡å‹å„ªå…ˆé †åºï¼š**
1. **Unit Tests** - æ¸¬è©¦å–®ä¸€å‡½å¼æˆ–é¡åˆ¥
2. **Integration Tests** - æ¸¬è©¦å¤šå€‹æ¨¡çµ„çš„æ•´åˆ
3. **E2E Tests** - æ¸¬è©¦å®Œæ•´çš„ä½¿ç”¨è€…æµç¨‹

**ç¯„ä¾‹ï¼š**
```typescript
// frontend/src/services/blog.service.spec.ts
describe('BlogService', () => {
  it('should create a new blog post', async () => {
    const service = new BlogService();
    const post = await service.createPost({
      title: 'Test Post',
      content: 'Test Content'
    });

    expect(post.id).toBeDefined();
    expect(post.title).toBe('Test Post');
  });
});
```

**æª¢æŸ¥æ¸…å–®ï¼š**
- [ ] æ¸¬è©¦æ¡ˆä¾‹å·²æ’°å¯«
- [ ] æ¸¬è©¦æè¿°æ¸…æ¥šï¼ˆdescribe/it èªæ„æ˜ç¢ºï¼‰
- [ ] æ¸¬è©¦åŸ·è¡Œå¾Œé¡¯ç¤ºç‚º**å¤±æ•—**ï¼ˆRedï¼‰
- [ ] æ¸¬è©¦å¤±æ•—åŸå› ç¬¦åˆé æœŸï¼ˆå› ç‚ºåŠŸèƒ½å°šæœªå¯¦ä½œï¼‰

**åŸ·è¡Œæ¸¬è©¦æŒ‡ä»¤ï¼š**
```bash
# Unit Tests
npm test

# ç‰¹å®šæª”æ¡ˆ
npm test -- blog.service.spec.ts

# Watch mode
npm test -- --watch
```

---

### Step 2: Green - å¯¦ä½œåŠŸèƒ½ï¼ˆMake it Workï¼‰

**åŸ·è¡Œå‹•ä½œï¼š**
1. æ’°å¯«**æœ€å°‘é‡**çš„ç¨‹å¼ç¢¼ï¼Œè®“æ¸¬è©¦é€šé
2. ä¸éœ€è¦è€ƒæ…®å„ªåŒ–æˆ–å®Œç¾çš„è¨­è¨ˆ
3. åŸ·è¡Œæ¸¬è©¦ï¼Œç¢ºèªæ¸¬è©¦**é€šé**ï¼ˆGreenï¼‰

**å¯¦ä½œåŸå‰‡ï¼š**
- åªå¯«è¶³å¤ è®“æ¸¬è©¦é€šéçš„ç¨‹å¼ç¢¼
- éµå¾ª `.aiassistant/rules/core.md` çš„è¦ç¯„
- é¿å…éåº¦è¨­è¨ˆï¼ˆYAGNI - You Aren't Gonna Need Itï¼‰

**ç¯„ä¾‹ï¼š**
```typescript
// frontend/src/services/blog.service.ts
export class BlogService {
  async createPost(data: { title: string; content: string }) {
    // æœ€ç°¡å–®çš„å¯¦ä½œï¼Œè®“æ¸¬è©¦é€šé
    return {
      id: crypto.randomUUID(),
      title: data.title,
      content: data.content,
      createdAt: new Date()
    };
  }
}
```

**æª¢æŸ¥æ¸…å–®ï¼š**
- [ ] ç¨‹å¼ç¢¼å·²å¯¦ä½œ
- [ ] æ¸¬è©¦åŸ·è¡Œå¾Œé¡¯ç¤ºç‚º**é€šé**ï¼ˆGreenï¼‰
- [ ] æ²’æœ‰ä½¿ç”¨ `any` é¡å‹
- [ ] æ²’æœ‰ä½¿ç”¨ä¸å®‰å…¨çš„å‹åˆ¥è½‰æ› `as`
- [ ] æ‰€æœ‰ç•°æ­¥æ“ä½œéƒ½æœ‰ `await` æˆ– `.catch()`

---

### Step 3: Refactor - é‡æ§‹ç¨‹å¼ç¢¼ï¼ˆMake it Rightï¼‰

**åŸ·è¡Œå‹•ä½œï¼š**
1. é‡æ§‹ç¨‹å¼ç¢¼ï¼Œæ”¹å–„è¨­è¨ˆèˆ‡å¯è®€æ€§
2. ç§»é™¤é‡è¤‡çš„ç¨‹å¼ç¢¼ï¼ˆDRY - Don't Repeat Yourselfï¼‰
3. åŸ·è¡Œæ¸¬è©¦ï¼Œç¢ºä¿æ¸¬è©¦**ä»ç„¶é€šé**

**é‡æ§‹æª¢æŸ¥é …ç›®ï¼š**
- [ ] ç§»é™¤é‡è¤‡çš„ç¨‹å¼ç¢¼
- [ ] æ”¹å–„è®Šæ•¸èˆ‡å‡½å¼å‘½å
- [ ] ç°¡åŒ–è¤‡é›œçš„é‚è¼¯
- [ ] ç¢ºä¿ç¬¦åˆ SOLID åŸå‰‡
- [ ] æ¸¬è©¦ä»ç„¶å…¨éƒ¨é€šé

**å¸¸è¦‹é‡æ§‹æ¨¡å¼ï¼š**
- æå–å‡½å¼ï¼ˆExtract Functionï¼‰
- æå–è®Šæ•¸ï¼ˆExtract Variableï¼‰
- ç§»é™¤é­”è¡“æ•¸å­—ï¼ˆReplace Magic Number with Constantï¼‰
- ç°¡åŒ–æ¢ä»¶å¼ï¼ˆSimplify Conditionalï¼‰

---

### Step 4: æ›´æ–° TODO æ¸…å–®

**åŸ·è¡Œå‹•ä½œï¼š**
1. æ¨™è¨˜å·²å®Œæˆçš„ä»»å‹™ç‚º `[x]`
2. æäº¤ç¨‹å¼ç¢¼ï¼ˆéµå¾ª Conventional Commitsï¼‰
3. ç¹¼çºŒä¸‹ä¸€å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼ˆå›åˆ° Step 1ï¼‰

**Commit Message è¦ç¯„ï¼ˆ@commitlint/config-conventionalï¼‰ï¼š**

æ ¼å¼ï¼š`<type>[optional scope]: <description>`

**å…è¨±çš„ typeï¼š**
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¾© bug
- `docs`: æ–‡ä»¶æ›´æ–°
- `style`: ç¨‹å¼ç¢¼æ ¼å¼èª¿æ•´ï¼ˆä¸å½±éŸ¿åŠŸèƒ½ï¼‰
- `refactor`: é‡æ§‹ï¼ˆä¸æ˜¯æ–°åŠŸèƒ½ä¹Ÿä¸æ˜¯ bug ä¿®å¾©ï¼‰
- `perf`: æ•ˆèƒ½å„ªåŒ–
- `test`: æ¸¬è©¦ç›¸é—œ
- `build`: å»ºç½®ç³»çµ±æˆ–å¤–éƒ¨ä¾è³´è®Šæ›´
- `ci`: CI é…ç½®æª”æ¡ˆæˆ–è…³æœ¬è®Šæ›´
- `chore`: å…¶ä»–ä¸å½±éŸ¿ src æˆ– test çš„è®Šæ›´
- `revert`: å›å¾©å…ˆå‰çš„ commit

**ç¯„ä¾‹ï¼š**
```bash
# feat: æ–°åŠŸèƒ½
git add .
git commit -m "feat: add blog post creation service"

# test: æ¸¬è©¦
git commit -m "test: add unit tests for blog service"

# refactor: é‡æ§‹
git commit -m "refactor: simplify blog post creation logic"

# fix: ä¿®å¾© bug
git commit -m "fix: resolve null pointer in blog service"

# feat with scope: å¸¶ç¯„åœçš„æ–°åŠŸèƒ½
git commit -m "feat(blog): add post publishing feature"

# breaking change: é‡å¤§è®Šæ›´ï¼ˆåŠ å…¥ ! æˆ– BREAKING CHANGEï¼‰
git commit -m "feat!: change blog API response structure"
```

**è¦å‰‡ï¼š**
- type å¿…é ˆæ˜¯å°å¯«
- description å¿…é ˆæ˜¯å°å¯«é–‹é ­
- description ä¸èƒ½ä»¥å¥è™Ÿçµå°¾
- ä½¿ç”¨ç¥ˆä½¿å¥ï¼ˆå¦‚ï¼šaddã€changeã€fixï¼Œè€Œé addedã€changedã€fixedï¼‰

**æª¢æŸ¥æ¸…å–®ï¼š**
- [ ] TODO æ¸…å–®å·²æ›´æ–°
- [ ] ç¨‹å¼ç¢¼å·²æäº¤ï¼ˆcommit message ç¬¦åˆè¦ç¯„ï¼‰
- [ ] æ‰€æœ‰æ¸¬è©¦é€šé
- [ ] æ²’æœ‰ TypeScript ç·¨è­¯éŒ¯èª¤

---

## ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥

åœ¨é–‹ç™¼éç¨‹ä¸­ï¼ŒæŒçºŒç¢ºèªä»¥ä¸‹é …ç›®ï¼š

### ğŸ”’ å®‰å…¨è¦ç¯„ï¼ˆåƒè€ƒ core.mdï¼‰
- [ ] ä¸åœ¨ç¨‹å¼ç¢¼ä¸­ç¡¬ç·¨ç¢¼ API é‡‘é‘°æˆ–æ•æ„Ÿè³‡è¨Š
- [ ] ä¸åœ¨ Log ä¸­è¼¸å‡º PIIï¼ˆå€‹äººè­˜åˆ¥è³‡è¨Šï¼‰
- [ ] é˜²æ­¢ SQL/Shell Injectionï¼ˆä¸ä¸²æ¥å­—ä¸²çµ„åˆæŒ‡ä»¤ï¼‰
- [ ] ä½¿ç”¨ç’°å¢ƒè®Šæ•¸æ³¨å…¥é…ç½®è³‡è¨Š

### ğŸ§ª æ¸¬è©¦å“è³ª
- [ ] å–®å…ƒæ¸¬è©¦ä¸ç™¼èµ·çœŸå¯¦ç¶²çµ¡è«‹æ±‚ï¼ˆä½¿ç”¨ Mockï¼‰
- [ ] æ¸¬è©¦æ¡ˆä¾‹å…·æœ‰ç¨ç«‹æ€§ï¼ˆä¸ä¾è³´åŸ·è¡Œé †åºï¼‰
- [ ] æ¸¬è©¦è¦†è“‹ç‡é”åˆ°åˆç†æ°´å¹³ï¼ˆå»ºè­° >80%ï¼‰

### âœ… TypeScript è¦ç¯„
- [ ] ä¸ä½¿ç”¨ `any` é¡å‹
- [ ] ä¸ä½¿ç”¨ `as` é€²è¡Œä¸å®‰å…¨çš„å‹åˆ¥è½‰æ›
- [ ] ä¸ä½¿ç”¨éç©ºæ–·è¨€ `!`ï¼ˆé™¤éé‚è¼¯ä¸Šçµ•å°å­˜åœ¨ï¼‰
- [ ] ä½¿ç”¨ Type Guards æˆ– Schema é©—è­‰ï¼ˆZod/Valibotï¼‰

### ğŸ¯ ç¨‹å¼ç¢¼é¢¨æ ¼
- [ ] éµå¾ªå°ˆæ¡ˆçš„ ESLint è¦å‰‡
- [ ] æ²’æœ‰å¾ªç’°ä¾è³´
- [ ] å‡½å¼ä¿æŒç°¡çŸ­ï¼ˆå»ºè­° <50 è¡Œï¼‰
- [ ] ä½¿ç”¨æœ‰æ„ç¾©çš„è®Šæ•¸èˆ‡å‡½å¼å‘½å

---

## åŸ·è¡ŒæŒ‡ä»¤åƒè€ƒ

### æ¸¬è©¦ç›¸é—œ
```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
npm test

# åŸ·è¡Œç‰¹å®šæª”æ¡ˆçš„æ¸¬è©¦
npm test -- <file-path>

# Watch modeï¼ˆè‡ªå‹•é‡æ–°åŸ·è¡Œæ¸¬è©¦ï¼‰
npm test -- --watch

# æ¸¬è©¦è¦†è“‹ç‡å ±å‘Š
npm test -- --coverage

# E2E æ¸¬è©¦
npm run test:e2e
```

### ç¨‹å¼ç¢¼æª¢æŸ¥
```bash
# TypeScript é¡å‹æª¢æŸ¥
npm run type-check

# ESLint æª¢æŸ¥
npm run lint

# è‡ªå‹•ä¿®å¾© ESLint éŒ¯èª¤
npm run lint:fix

# æ ¼å¼åŒ–ç¨‹å¼ç¢¼
npm run format
```

---

## å®Œæˆæ¢ä»¶

å–®ä¸€åŠŸèƒ½é»é–‹ç™¼å®Œæˆçš„æ¨™æº–ï¼š
- âœ… æ¸¬è©¦å·²æ’°å¯«ä¸”é€šé
- âœ… åŠŸèƒ½å·²å¯¦ä½œ
- âœ… ç¨‹å¼ç¢¼å·²é‡æ§‹
- âœ… TODO æ¸…å–®å·²æ›´æ–°
- âœ… ç¨‹å¼ç¢¼å·²æäº¤
- âœ… ç¬¦åˆæ‰€æœ‰ç¨‹å¼ç¢¼å“è³ªæ¨™æº–

---

## ä¸‹ä¸€æ­¥

ç•¶æ‰€æœ‰é–‹ç™¼ä»»å‹™å®Œæˆå¾Œï¼Œé€²å…¥ **Stabilize Mode**ï¼ˆç©©å®šåŒ–æ¨¡å¼ï¼‰ï¼š
- åŸ·è¡Œå®Œæ•´çš„æ¸¬è©¦å¥—ä»¶
- åŸ·è¡Œ E2E æ¸¬è©¦
- ä¿®å¾©æ•´åˆå•é¡Œ
- æº–å‚™ Code Review

---

## åƒè€ƒè³‡æ–™

- å°ˆæ¡ˆæœ€é«˜æŒ‡å°åŸå‰‡ï¼š`.aiassistant/rules/core.md`
- TODO æ¸…å–®ï¼š`docs/todos/<feature-name>.md`
- TDD æœ€ä½³å¯¦è¸ï¼šRed-Green-Refactor
- Commit è¦ç¯„ï¼šConventional Commits
