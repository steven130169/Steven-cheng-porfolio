## Gemini Added Memories

- User is deciding between Express and NestJS for the backend stack and has asked for a comparison of their pros and cons. (完成 - 決策已記錄於 ADR 0003)
- User chose NestJS for the backend stack. (完成 - 決策已記錄於 ADR 0003)
- User is now asking for a comparison of Monorepo vs. Side-by-side project structures. (完成 - 決策已記錄於 ADR 0002)
- User chose Option A (public API, no authentication) for the API contract. (完成 - Events API 已實作並通過測試)
- User is ready to proceed to the implementation phase. (進行中 - 已完成 Events 模組實作)
- User paused the project restructuring to discuss dependency management. (完成 - NPM Workspaces 已確定)
- User is asking if dependencies can be shared between frontend and backend with the current "modified side-by-side" structure plan. (完成 - NPM Work策已記錄於 ADR 0002)
- User agreed to use NPM Workspaces for dependency management. (完成 - 決策已記錄於 ADR 0002)
- User is asking how to adjust testing strategies (Unit, E2E, BDD) for both frontend and backend in this new Monorepo structure. (完成 - 決策已記錄於 ADR 0004)
- User wants to isolate project-specific instructions. (完成 - 決策已記錄於 ADR 0005)
- User wants to organize these files in separate folders while ensuring the agent can still read them. (完成 - 決策已記錄於 ADR 0005)
- 已新增 ADR 檔案並 Push 到遠端倉庫。(完成)
- 已將 ADR 文件撰寫準則新增至 `project/AGENTS.md`。(完成)
- 已將記憶儲存準則新增至 `project/AGENTS.md`。(完成)
- 已完成 Events API 的後端實作 (`GET`, `POST`)。(完成)
- 已完成 Frontend Event 組件與後端 API 的串接。(完成)
- 已建立並固化 BDD 與 E2E 測試流程，支援數據隔離與並行執行。(完成)
- 已優化開發體驗，新增 `npm run dev` 與修復 IDE 整合配置。(完成)
- 已生成專案 `README.md`。(完成)
- 已根據使用者要求，提交 `README.md`、更新後的 ADRs 與基礎設施檔案。(完成)
- User agreed to use GitHub Actions for CI/CD and a "Protected Feature Branch" Git Flow strategy (Single Main Branch). (完成 - 決策已記錄於 ADR 0009)
- 已更新 ADR 0009 以明確說明採用 "Single Main Branch" 策略。(完成)
- 已確立整體架構：Next.js (GCP Cloud Run) + Custom NestJS (GCP Cloud Run) + Firestore + 自建 CMS 模組 (Firestore-backed) (完成 - 決策已記錄於 ADR 0010)
- 已完成前端遷移：Vite -> Next.js 14 (App Router)，包含所有組件、測試與 E2E 配置。(完成)

## 待辦事項 (下次會從這裡繼續)

- **Blog CMS 模組開發** (參考 ADR 0013)
  - [ ] 設計 Firestore 中 Blog Post 的資料結構。
  - [ ] 在 NestJS 後端建立 `BlogModule`，提供 CRUD API。
  - [ ] 在 Next.js 前端開發 `/blog` 頁面顯示文章。
  - [ ] 在 Next.js 前端開發 `/admin/blog` 頁面，提供文章編輯功能 (包含 Markdown Editor)。
- **售票系統模組開發** (參考 ADR 0012)
  - [ ] 設計 Firestore 中 Events, Tickets, Orders 的資料結構。
  - [ ] 在 NestJS 後端建立 `EventModule`、`OrderModule`。
  - [ ] 實作庫存管理 (Inventory Management) 服務，使用 Firestore Transaction。
  - [ ] 實作訂單狀態機 (Order State Machine)。
  - [ ] 整合第三方支付 (ECPay/Stripe) 流程。
  - [ ] 開發 Next.js 前端頁面，提供選票、結帳功能。
- **CRM 模組開發** (參考 ADR 0011)
  - [ ] 設計 Firestore `customers` 資料結構。
  - [ ] 在 NestJS 實作 `CustomerModule`。
  - [ ] 實作「購票自動歸戶」邏輯。
  - [ ] 實作 Admin UI 裡的「會員列表」與「標籤管理」。
- **CI/CD Pipeline 完善**
  - [ ] 更新 `.github/workflows/ci.yml`，包含 Next.js 的 Build 與 Lint。
  - [ ] 創建 `.github/workflows/deploy.yml`，實現 Next.js 與 NestJS 到 Cloud Run 的自動部署。
- **Terraform Infra 完善**
  - [ ] 更新 `infra/main.tf` 以定義 Next.js 的 Cloud Run 服務。
  - [ ] 確保 Terraform 可以部署所有服務。
- **電子報模組 (Optional)**
  - [ ] 設計 Firestore 中 Subscribers, Newsletters 的資料結構。
  - [ ] 在 NestJS 後端建立 `NewsletterModule`，提供訂閱及發送功能。
  - [ ] 整合 Email 發送服務 (例如 SendGrid)。
- **修復 BDD 測試基礎設施** (Technical Debt)
  - [ ] 診斷 `npm run test:bdd` 在 `hooks.ts` 中無法啟動 Next.js 伺服器的根本原因。
  - [ ] 實作可靠的伺服器啟動和等待機制（例如使用 `wait-on` 套件）。
  - [ ] 重新啟用 `npm run test:bdd` 腳本。
  - [ ] 更新 `.husky/pre-push` 確保 BDD 測試在推送前運行。
